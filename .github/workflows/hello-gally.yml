name: Run Hello Gally Test

on:
  workflow_dispatch:

jobs:
  hello-gally-job:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          # We need to checkout the submodules as well, which contain the session data
          submodules: 'recursive'

      - name: Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20.x'

      - name: Install dependencies
        run: npm install

      - name: Compile test script
        run: npx tsc scripts/send-test-message.ts

      - name: Run Hello Gally script
        run: node dist/scripts/send-test-message.js
